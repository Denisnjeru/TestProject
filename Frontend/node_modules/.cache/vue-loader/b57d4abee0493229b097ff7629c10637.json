{"remainingRequest":"/Users/user/Documents/TestProject/Frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/Documents/TestProject/Frontend/src/components/TopNav.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/user/Documents/TestProject/Frontend/src/components/TopNav.vue","mtime":1647724083208},{"path":"/Users/user/Documents/TestProject/Frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Documents/TestProject/Frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/user/Documents/TestProject/Frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/user/Documents/TestProject/Frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapGetters } from 'vuex'\nimport notifications from '@/services/notifications'\nimport notification from  '@/components/notifications/NotificationDropDown.vue'\n\nexport default {\n    data() {\n        return {\n            showNotifications: false,\n            unread_count:0,\n            notifications: [],\n            showMenu: false\n        }\n    },\n    computed: {\n        ...mapGetters('Auth',['authUser']),\n        ...mapGetters('User',['userType', 'userData']),\n        user: function(){\n            return this.userData\n        },\n        hasUnread () {\n            return this.unread_count > 0\n        }\n    },\n    mounted(){\n        // this.initDropdown()\n        this.getunreadcount()\n        this.fetchunreadlist()\n    },\n    components: {\n        notification\n    },\n    methods: {\n        popShowNotifications () {\n            this.showNotifications = !this.showNotifications\n            console.log(this.notifications)\n        },\n        popShowMenu(){\n            this.showMenu = !this.showMenu\n            console.log('Menu')\n        },\n        logout(){\n            // let state = this.$store.state;\n\n            // Object.keys(state).forEach(key => {\n            //     if (key != 'Auth') {\n            //         state[key] = null\n            //     } \n            // }); @click=\"logout()\"\n            \n            this.$store.dispatch('Auth/logout')\n            this.$store.dispatch('User/logout')\n            this.$router.push('/login')\n        },\n        profile() {\n            if (this.userType == 'supplier') {\n                this.$router.push('/supplier/home/profile');\n            } else {\n                this.$router.push('/profile/' + this.authUser.user_id);\n            }\n        },\n        async getunreadcount(){\n            try{\n                const response = await notifications.unread_notifications_count()\n                this.unread_count = response.data.unread_count\n            } catch(error){\n                console.log(error)\n            }\n        },\n        async fetchunreadlist(){\n            try{\n                const response = await notifications.unread_notifications_list()\n                console.log(response.data.unread_list)\n                this.notifications = response.data.unread_list\n            }catch(error){\n                console.log(error)\n            }\n        },\n        async AllMarkRead(){\n            try{\n                await notifications.mark_all_as_read()\n                this.showNotifications = !this.showNotifications\n                this.getunreadcount()\n            }catch(error){\n                console.log(error)\n            }\n        },\n        onClickOutside () {\n            this.showNotifications = false\n        },\n        onClickOutside2(){\n            this.showMenu =false\n        }\n    },\n}\n",{"version":3,"sources":["TopNav.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TopNav.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"nav-top\">\n        <div class=\"brand\">            \n            <router-link to=\"/\">\n                <img class=\"brand__logo\" src=\"@/assets/logo.png\" alt=\"logo\">\n            </router-link>\n        </div>\n        <div class=\"shortcuts\">\n            <div class=\"left\">\n                <font-awesome-icon class=\"back-icon\" icon=\"arrow-left\" @click=\"$router.go(-1)\" />\n                <input class=\"search-input\" type=\"text\" placeholder=\"Search...\">\n                <font-awesome-icon class=\"search-icon\" icon=\"search\" />\n            </div>\n            <div class=\"right\">\n                    <span class=\"dropdown dropdown-notifications\" v-click-outside=\"onClickOutside\" v-on:click=\"popShowNotifications()\">\n                        <p>\n                            <font-awesome-icon class=\"notifications__icon\" icon=\"bell\" />\n                            <sup class=\"notifications__count\">{{ unread_count }}</sup>\n                        </p>\n                        <!-- <span v-if=\"showNotifications\" class=\"notications-dropdown__content\">\n                            test\n                        </span> -->\n                        <div v-if=\"showNotifications\" class=\"dropdown-container\">\n                                <div class=\"dropdown-toolbar\">\n                                    <div v-show=\"hasUnread\" class=\"dropdown-toolbar-actions\">\n                                    <a href=\"#\" @click.prevent=\"AllMarkRead()\">Mark all as read</a>\n                                    </div>\n\n                                    <h3 class=\"dropdown-toolbar-title\">\n                                    Notifications ({{ unread_count }})\n                                    </h3>\n                                </div>\n                                <ul class=\"dropdown-menu\">\n                                    <notification v-for=\"notification in notifications\"\n                                                :key=\"notification.id\"\n                                                :notification=\"notification\"\n                                                @read=\"markAsRead(notification)\"\n                                    />\n                                    <li v-if=\"!hasUnread\" class=\"notification\">\n                                    You don't have any unread notifications.\n                                    </li>\n                                    <span class=\"dropdown-footer-hover\">\n                                        <div class=\"dropdown-footer\" align=\"center\">\n                                            <router-link to=\"/notifications\">View All</router-link>\n                                        </div>\n                                    </span>\n                                </ul>\n                        </div>\n                    </span>                 \n                <div class=\"user\">\n                    <p class=\"user__identity\" @click=\"profile()\">\n                        <span  v-if=\"user\">\n                            <img v-if=\"user.profile_pic\" class=\"user__identity--pic\" :src=\"user.profile_pic\" alt=\"profile pic\">\n                            <img v-else class=\"user__identity--pic\" src=\"@/assets/user.png\" alt=\"profile pic\">\n                        </span>\n                        <img v-else class=\"user__identity--pic\" src=\"@/assets/user.png\" alt=\"profile pic\">\n                        <span class=\"user__name\" v-if=\"authUser\">{{authUser.firstname}}</span>\n                        <span class=\"user__name\" v-else></span>\n                    </p>                   \n                    <span v-on:click=\"popShowMenu()\" v-click-outside=\"onClickOutside2\">\n                        <font-awesome-icon class=\"dropdown-dropmenu__icon\" icon=\"chevron-down\" />\n                        <!-- <div class=\"dropdown-content\"> -->\n                        <div class=\"dropdown-dropmenu\" style=\"width: 180px\" v-if=\"showMenu\">\n                            <div class=\"header-nav-current-user\">\n                                <a class=\"no-underline user-profile-link px-3 pt-2 pb-2 mb-n2 mt-n1 d-block\"> \n                                    Signed in as\n                                    <strong class=\"css-truncate-target\" v-if=\"authUser\">{{authUser.firstname}}</strong>\n                                    <strong v-else></strong>\n                                </a>\n                            </div>\n                            <div class=\"dropdown-divider\"></div>\n                            <span class=\"dropdown-item dropdown-item-hover\" @click=\"profile()\">\n                                <font-awesome-icon class=\"dropdown-content__item--icon\" icon=\"user\" />\n                                <span class=\"px-3\">Profile</span>\n                            </span>\n                            <span class=\"dropdown-item dropdown-item-hover\" @click=\"logout\">\n                                <font-awesome-icon class=\"dropdown-content__item--icon\" icon=\"power-off\" />\n                                <span class=\"px-3\">log out</span>\n                            </span>\n                        </div>\n                    </span>\n                </div> \n            </div>               \n        </div>\n    </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport notifications from '@/services/notifications'\nimport notification from  '@/components/notifications/NotificationDropDown.vue'\n\nexport default {\n    data() {\n        return {\n            showNotifications: false,\n            unread_count:0,\n            notifications: [],\n            showMenu: false\n        }\n    },\n    computed: {\n        ...mapGetters('Auth',['authUser']),\n        ...mapGetters('User',['userType', 'userData']),\n        user: function(){\n            return this.userData\n        },\n        hasUnread () {\n            return this.unread_count > 0\n        }\n    },\n    mounted(){\n        // this.initDropdown()\n        this.getunreadcount()\n        this.fetchunreadlist()\n    },\n    components: {\n        notification\n    },\n    methods: {\n        popShowNotifications () {\n            this.showNotifications = !this.showNotifications\n            console.log(this.notifications)\n        },\n        popShowMenu(){\n            this.showMenu = !this.showMenu\n            console.log('Menu')\n        },\n        logout(){\n            // let state = this.$store.state;\n\n            // Object.keys(state).forEach(key => {\n            //     if (key != 'Auth') {\n            //         state[key] = null\n            //     } \n            // }); @click=\"logout()\"\n            \n            this.$store.dispatch('Auth/logout')\n            this.$store.dispatch('User/logout')\n            this.$router.push('/login')\n        },\n        profile() {\n            if (this.userType == 'supplier') {\n                this.$router.push('/supplier/home/profile');\n            } else {\n                this.$router.push('/profile/' + this.authUser.user_id);\n            }\n        },\n        async getunreadcount(){\n            try{\n                const response = await notifications.unread_notifications_count()\n                this.unread_count = response.data.unread_count\n            } catch(error){\n                console.log(error)\n            }\n        },\n        async fetchunreadlist(){\n            try{\n                const response = await notifications.unread_notifications_list()\n                console.log(response.data.unread_list)\n                this.notifications = response.data.unread_list\n            }catch(error){\n                console.log(error)\n            }\n        },\n        async AllMarkRead(){\n            try{\n                await notifications.mark_all_as_read()\n                this.showNotifications = !this.showNotifications\n                this.getunreadcount()\n            }catch(error){\n                console.log(error)\n            }\n        },\n        onClickOutside () {\n            this.showNotifications = false\n        },\n        onClickOutside2(){\n            this.showMenu =false\n        }\n    },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.d-block {\n    display: block !important;\n}\n.no-underline {\n    text-decoration: none !important;\n}\n.px-3 {\n    padding-right: 16px !important;\n    padding-left: 16px !important;\n}\n.pb-2 {\n    padding-bottom: 8px !important;\n}\n.pt-2 {\n    padding-top: 8px !important;\n}\n.mb-n2 {\n    margin-bottom: -8px !important;\n}\n.mt-n1 {\n    margin-top: -4px !important;\n}\n.nav-top {\n    width: 100%;\n    height: 9vh;\n    @include grid_row;\n    z-index: 10;\n    @include bottom-shadow;\n\n    .brand {\n        // background-color: $color-white-pure;\n        width: 18.6%;\n        position: relative;\n        padding: $line-height/2;\n        // @include shadow;\n        // margin-top: 12vh;\n        @include grid_row;\n        //responsive\n        // display: none;\n\n        &__logo {\n            height: $line-height*0.9;\n            margin-left: $line-height/3;\n        }\n        \n    }\n\n    .shortcuts {\n        width: 100%;\n        @include grid_row;\n        .left {\n            width: 15%;\n            margin-left: 2%;\n            @include grid_row;\n\n            .back-icon {\n                margin-right: $line-height;\n                font-size: $font-size-title;\n                color: $color-green-main;\n                cursor: pointer;\n            }\n\n            .search-input {\n                padding: $line-height/3 $line-height;\n                border-radius: $line-height/4;\n                border: none;\n                background-color: $color-white-milk;\n                @include shadow();\n\n                &:focus {\n                outline: none;\n                }\n            }\n\n            .search-icon {\n                margin-left: -$line-height;\n            }\n        }\n\n        .right {\n            @include grid_row;\n            justify-content: flex-end;\n            padding: 0 $line-height;\n// here\n            .dropdown-container{\n                cursor: pointer;\n                position: relative;\n                display: inline-block;\n            }\n            \n            .dropdown-toolbar {\n                padding-top: 6px;\n                padding-left: 20px;\n                padding-right: 20px;\n                padding-bottom: 5px;\n                background-color: #fff;\n                border-bottom: 1px solid rgba(0, 0, 0, 0.15);\n                border-radius: 4px 4px 0 0;\n            }\n            .dropdown-toolbar .dropdown-toolbar-actions {\n                float: right;\n            }\n            .dropdown-toolbar .dropdown-toolbar-title {\n                margin: 0;\n                font-size: 14px;\n            }\n            .dropdown-notifications .dropdown-toolbar{\n                padding: 9.6px 12px;\n            }\n            .dropdown-notifications .dropdown-footer {\n                padding: 1.6px 12px;\n            }\n            .dropdown-notifications .dropdown-toolbar {\n                background: #fff;\n            }\n            .dropdown-notifications .dropdown-footer {\n                background: #eeeeee;\n                padding: 9.6px 20px;\n            }\n            .dropdown-container > .dropdown-menu {\n                position: static;\n                z-index: 1000;\n                float: none!important;\n                padding: 10px 0;\n                margin: 0;\n                border: 0;\n                background: transparent;\n                border-radius: 0;\n                -webkit-box-shadow: none;\n                box-shadow: none;\n                max-height: 330px;\n                overflow-y: auto;\n            }\n            .dropdown-container > .dropdown-menu + .dropdown-menu {\n                padding-top: 0;\n            }\n            .dropdown-menu > li > a {\n                overflow: hidden;\n                white-space: nowrap;\n                word-wrap: normal;\n                text-decoration: none;\n                text-overflow: ellipsis;\n                -o-text-overflow: ellipsis;\n                -webkit-transition: none;\n                -o-transition: none;\n                transition: none;\n            }\n            .dropdown-menu .notification{\n                padding: 9.6px 12px;\n            }\n            .dropdown-notifications > .dropdown-container,\n            .dropdown-notifications > .dropdown-menu {\n                width: 450px;\n                max-width: 450px;\n            }\n            .dropdown-notifications .dropdown-menu {\n                padding: 0;\n            }\n            .notificationstv {\n                list-style: none;\n                padding: 0;\n            }\n            .dropdown-footer {\n                padding: 2.5px 20px;\n                border-top: 1px solid #ccc;\n                // border-top: 1px solid rgba(0, 0, 0, 0.15);\n                border-radius: 0 0 4px 4px;\n            }\n            .dropdown-footer-hover{\n                & :hover{\n                    background: #ccc;\n                }\n            }\n\n            .dropdown-notifications {\n                cursor: pointer;\n                .dropdown-container {\n                    display: block;\n                    position: absolute;\n                    background-color: #fff;\n                    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n                    z-index: 20;\n                    margin-top: 4.2vh;\n                    margin-left: -20ch;\n                    width: 40ch;\n                    padding: $line-height/2;\n                }\n            \n                .notification-icon.hide-count:after {\n                    display: none;\n                }\n            \n                .dropdown-toolbar .dropdown-toolbar-actions {\n                    margin-top: -2px;\n                    font-size: 13px;\n                }\n            \n                .notification-mark-read {\n                    float: right;\n                    float: right;\n                    color: #333;\n                    opacity: 0.4;\n                \n                    &:hover {\n                        opacity: .8;\n                    }\n                }\n            \n                .notification-action {\n                    margin-top: 5px;\n                    margin-bottom: 2px;\n                }\n            \n                .notification .media-body {\n                    padding-top: 0px;\n                }\n            \n                .media-object img {\n                    width: 64px;\n                }\n            }\n// there\n            .notications-dropdown {\n                cursor: pointer;\n                position: relative;\n                display: inline-block;\n\n                &__content {\n                    display: block;\n                    position: absolute;\n                    background-color: #f1f1f1;\n                    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n                    z-index: 20;\n                    margin-top: 4.2vh;\n                    margin-left: -20ch;\n                    width: 44ch;\n                    padding: $line-height/2;\n                }\n            }\n\n            .notications-dropdown {\n                cursor: pointer;\n                position: relative;\n                display: inline-block;\n\n                &__content {\n                    display: block;\n                    position: absolute;\n                    background-color: #f1f1f1;\n                    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n                    z-index: 20;\n                    margin-top: 4.2vh;\n                    margin-left: -20ch;\n                    width: 44ch;\n                    padding: $line-height/2;\n                }\n            }\n\n            .notifications {\n                display: block;\n                margin-right: $line-height/2;\n                &__icon {\n                    color: $color-blue-main;\n                    font-size: $font-size-title;\n                }\n\n                &__count {\n                    color: $color-blue-light;\n                    font-weight: 600;\n                    margin-top: -$line-height;\n                }\n            }\n\n            .user {\n                @include grid_row;\n                &__identity {\n                    @include grid_row;\n                    margin: 0 $line-height/4;                    \n\n                    &--pic {\n                        height: $line-height*1.5;\n                        width: $line-height*1.5;\n                        margin: 0 $line-height/4;\n                        border-radius: 50%;\n                        border: 2px solid $color-blue-main;\n                        cursor: pointer;\n\n                        &:hover {\n                           border: 2px solid $color-blue-light; \n                        }\n                    }\n                }\n\n                &__icon {\n                    font-size: $line-height*1.5;\n                    margin: $line-height/3;                    \n                }\n\n                .dropdown-dropmenu{\n                    position: absolute;\n                    width: 160px;\n                    list-style: none;\n                    background-clip: padding-box;\n                    border: 1px solid #fff;\n                    border-radius: 6px;  \n                    display: block;\n                    background-color: #fff;\n                    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n                    z-index: 20;\n                    margin-top: 4.2vh;\n                    margin-left: -20ch;\n                    width: 40ch;\n                    padding: $line-height/2;\n                    \n                    &__icon {\n                        color: $color-green-main;\n                        cursor: pointer;\n                    }\n\n                    .header-nav-current-user{\n                        padding:0;\n                        font-size: inherit;\n\n                        .user-profile-link {\n                            color: #031b4e;\n                        }\n\n                        .css-truncate-target{\n                            max-width: 100%;\n                        }\n                    }\n\n                    .dropdown-divider{\n                        display: block;\n                        height: 0;\n                        margin:8px 0;\n                        border-top: 1px solid #031b4e;\n                    }\n\n                    .dropdown-item {\n                        cursor: pointer;\n                        display: block;\n                        padding: 4px 8px 10px 16px;\n                        overflow: hidden;\n                        // color: #8b949e;\n                        text-overflow: ellipsis;\n                        white-space: nowrap;\n\n                        &:hover {\n                        //    border: 2px solid $color-blue-light; \n                            background: #F3F5F9;\n                        }\n                    }\n\n                }\n                .dropdown-dropmenu-sw{\n                    right:0;\n                    left: auto;\n                }\n            }\n\n            .dropdown {\n                &__icon {\n                    color: $color-green-main;\n                    cursor: pointer;\n                }\n            }\n\n            \n        }\n    }\n}\n</style>"]}]}